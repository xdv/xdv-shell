// File: shell_main_tests.ds - This file is part of XDV
// Copyright (c) 2026 Dust LLC, and Contributors
// Description:
//   xdv-shell command-plane aggregate tests.

forge ShellMainTests {
    const TEST_PASS: UInt32 = 0;
    const TEST_FAIL: UInt32 = 1;

    proc K::combine(lhs: UInt32, rhs: UInt32) -> UInt32 {
        if lhs == TEST_PASS {
            return rhs;
        } else {
            return TEST_FAIL;
        }
    }

    proc K::run_all_tests() -> UInt32 {
        let parser = ShellParserTests::K::run_all_tests();
        let lexer = ShellLexerTests::K::run_all_tests();
        let executor = ShellExecutorTests::K::run_all_tests();
        let loop = ShellLoopTests::K::run_all_tests();

        let t1 = combine(parser, lexer);
        let t2 = combine(t1, executor);
        return combine(t2, loop);
    }
}
